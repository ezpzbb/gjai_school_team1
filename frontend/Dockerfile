# --- Build Stage ---
    FROM node:20-alpine AS build
    WORKDIR /app
    
    # ğŸ”¥ 1) build ARG ë°›ì•„ì˜¤ê¸°
    ARG VITE_KAKAO_API_KEY
    
    # ğŸ”¥ 2) ENVë¡œ Viteê°€ ì½ì„ ìˆ˜ ìˆê²Œ ì „ë‹¬
    ENV VITE_KAKAO_API_KEY=$VITE_KAKAO_API_KEY
    
    COPY package.json package-lock.json* ./
    RUN npm ci
    
    COPY . .
    RUN npm run build
    
    # --- Runtime Stage ---
    FROM node:20-alpine AS runtime
    WORKDIR /app
    
    RUN npm install -g serve
    
    COPY --from=build /app/dist ./dist
    
    EXPOSE 3000
    CMD ["serve", "-s", "dist", "-l", "3000"]
    